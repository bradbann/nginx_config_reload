worker_processes  4;
events {
    worker_connections  102400;
    use epoll;
}

http {
    gzip_comp_level 4;
    gzip_types text/plain application/x-javascript text/css application/xml;
    gzip_vary on;

    upstream nongxin {
        ip_hash;
        server   10.201.10.101:8080 max_fails=1 fail_timeout=10s;
        server   10.201.10.201:8080 max_fails=1 fail_timeout=10s;
    }

    upstream cas {
        ip_hash;
        server   10.201.10.102:8080 max_fails=1 fail_timeout=10s;
        server   10.201.10.202:8080 max_fails=1 fail_timeout=10s;
    }

    upstream imapi {
        ip_hash;
        server   10.201.10.103:8080 max_fails=1 fail_timeout=10s;
        server   10.201.10.203:8080 max_fails=1 fail_timeout=10s;
    }

    upstream fm {
        ip_hash;
        server   10.201.10.106:8080 max_fails=1 fail_timeout=10s;
        server   10.201.10.206:8080 max_fails=1 fail_timeout=10s;
    }

    upstream personal_center {
        ip_hash;
        server   10.201.10.108:8080 max_fails=1 fail_timeout=10s;
        server   10.201.10.208:8080 max_fails=1 fail_timeout=10s;
    }

    upstream sh {
        ip_hash;
        server   10.201.10.116:8080 max_fails=1 fail_timeout=10s;
        server   10.201.10.216:8080 max_fails=1 fail_timeout=10s;
    }

    upstream msc {
        ip_hash;
        server   10.201.10.123:8080 max_fails=1 fail_timeout=10s;
        server   10.201.10.223:8080 max_fails=1 fail_timeout=10s;
    }

    upstream ggpt {
        ip_hash;
        server   10.201.10.124:8080 max_fails=1 fail_timeout=10s;
        server   10.201.10.224:8080 max_fails=1 fail_timeout=10s;
    }

    upstream pm {
        ip_hash;
        server   10.201.10.125:8080 max_fails=1 fail_timeout=10s;
        server   10.201.10.225:8080 max_fails=1 fail_timeout=10s;
    }

    upstream passport {
        ip_hash;
        server   10.201.10.126:8080 max_fails=1 fail_timeout=10s;
        server   10.201.10.226:8080 max_fails=1 fail_timeout=10s;
    }

    upstream nxportal {
        server   10.201.10.128:8080 max_fails=1 fail_timeout=10s;
        server   10.201.10.228:8080 max_fails=1 fail_timeout=10s;
    }

    include vhost/*.conf;
}